---

id: requirements  
title: 服务器要求  
---  

# 服务器要求  

快速初始显示图像需要一种方法来检索图像或体积的部分内容，这些内容可以呈现为完整但有损的图像。  
例如，可以使用部分数据（分辨率）呈现图像，或者可以通过插值生成图像体积中的替代图像。  
这些图像最初被检索以实现快速显示，然后再检索全分辨率图像，随着更多数据的加载，显示逐渐改善。

DICOM标准委员会刚刚在DICOM中添加了对一种新编码方法的支持，称为高吞吐量JPEG 2000（HTJ2K）。  
这种编码方法支持图像的渐进解码，这意味着如果图像编码的前`N字节`可用，它们可以解码为较低分辨率或有损图像。  
启用此功能的配置称为`HTJ2K渐进分辨率（HTJ2K RPCL）`或`高吞吐量JPEG 2000分辨率位置组件层`。

最后，一些服务器可以配置为在其他URL端点提供图像的简化（部分）分辨率版本。

渐进加载将通过支持HTJ2K渐进分辨率编码数据来改善堆叠图像的显示。  
同时，体积数据将在所有后端中提高加载第一个体积所需的时间，除非它们被专门配置为自定义加载顺序。  
然而，不同类型的简化分辨率和流响应在DICOMweb实现中的支持差异很大。  
因此，本指南提供了关于如何配置各种配置的更多细节。

## 服务器要求

由于HTJ2K是一种新编码（并且仍未并入DICOM标准，尽管已批准合并），因此DICOMweb服务器尚未广泛支持它。  
服务器支持的各种方式可能会在未来发生变化。然而，我们预见到这种方法将以两种主要方式在大多数服务器中实现，但两者都要求服务器支持DICOMWeb标准和HTJ2K RPCL编码。

- **HTJ2K支持**：对于HTJ2K编码的图像，服务器必须支持以尊重HTJ2K RPCL配置的方式流式传输图像数据，允许客户端将部分数据解码为可显示的图像。

### 使用流式数据响应

XHR（XMLHttpRequest）流式传输是XHR浏览器级API的扩展，它使客户端能够在数据到达时检索数据片段，而不是等待整个响应。  
XHR流式传输通过在客户端和服务器之间保持持久连接并在数据可用时逐步发送数据来工作。

### 使用字节范围请求响应

XHR字节范围请求是JavaScript中XMLHttpRequest对象的一个功能，允许从服务器检索特定字节范围的数据。  
该功能通常用于分块下载大文件或恢复中断的下载。通过指定起始字节和结束字节位置，服务器可以只发送请求的部分文件，从而减少带宽使用并提高下载效率。

- **部分内容传输**：服务器必须支持HTTP Range请求，允许客户端请求并接收图像数据的特定字节范围。  
这对于处理大图像或体积数据非常重要，通过逐步获取和渲染数据的部分内容来进行处理。

:::info  
现有的JPEG 2000编码和新标准中的[HTJ2K](https://dicom.nema.org/medical/dicom/Supps/LB/sup235_lb_HTJ2K.pdf)也有一个指定部分分辨率端点的格式。  
确切的端点需要在JPIP引用的数据URL中指定。  
选项数据可用于在未来版本中提供所需的确切URL。  
:::  